(this["webpackJsonpamsterdam-scaffold-form"]=this["webpackJsonpamsterdam-scaffold-form"]||[]).push([[0],{271:function(e,t,n){e.exports=n(661)},276:function(e,t,n){},563:function(e,t,n){},642:function(e,t){},645:function(e,t){},647:function(e,t){},661:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(125),i=n.n(o),c=(n(276),n(9)),l=n(13),u=n(127),s=n(8),p=n(260),f=n(53),d=n(1),h=n(4),m=(n(563),n(23)),v=function(e){return e.reduce((function(e,t){return Object(c.a)(Object(c.a)({},e),{},Object(m.a)({},t,t))}),{})},b=n(270),g=function(e){return e.replace(/\./g," ").replace(/_/g," ").replace(/([A-Z])/g," $1").toLowerCase().replace(/^./,(function(e){return e.toUpperCase()}))},j=function(e){return Object.entries(e).reduce((function(e,t){var n=Object(l.a)(t,2),a=n[0],r=n[1];return Object(c.a)(Object(c.a)({},e),{},Object(m.a)({},a,g(r)))}),{})},O=n(78),y=n(79),E=n(266),w=n(264),k=n.n(w),S=function(){function e(t){Object(O.a)(this,e),this.grid=t}return Object(y.a)(e,[{key:"getValues",value:function(){return this.grid}},{key:"getDistinctValues",value:function(){var e=[];return this.grid.forEach((function(t){t.forEach((function(t){e.includes(t)||e.push(t)}))})),e}},{key:"sliceArea",value:function(t,n){if(t.x>n.x||t.y>n.y)throw new Error("Coordinates are mixed up. Please ensure topLeft is actually in the top-left corner. And bottomRight is actually in the bottom-right corner");return new e(this.grid.slice(t.y,n.y+1).map((function(e){return e.slice(t.x,n.x+1)})))}},{key:"getCoordinatesForValue",value:function(e){var t=[],n=[];return this.grid.forEach((function(a,r){a.forEach((function(a,o){a===e&&(t.push(o),n.push(r))}))})),{topLeft:{x:Math.min.apply(Math,t),y:Math.min.apply(Math,n)},bottomRight:{x:Math.max.apply(Math,t),y:Math.max.apply(Math,n)}}}}]),e}(),x=n(265),F=n.n(x),A=function(){function e(t){var n=this;Object(O.a)(this,e),this.fields=t,this.getFields=function(){return n.fields}}return Object(y.a)(e,[{key:"setGrid",value:function(t,n){var a=new S(n);return function(e,t){var n=t.getDistinctValues();if(n.length<e.length)throw new Error("Not all given fields are present in the grid. Please add these fields ".concat(F()(n,e).map((function(e){return'"'.concat(e,'"')})).join(", ")));n.forEach((function(n){if(!e.includes(n))throw new Error("".concat(n," is not an existing field. Existing fields are ").concat(e.map((function(e){return'"'.concat(e,'"')})).join(", "),"."));var a=t.getCoordinatesForValue(n),r=t.sliceArea(a.topLeft,a.bottomRight).getDistinctValues();if(1!==r.length||r[0]!==n)throw new Error('Grid contains an unsupported shape. Please make sure "'.concat(n,'" has a rectangular shape.'))}))}(Object.keys(this.fields),a),new e(Object(E.a)(this.fields,(function(e){a.getDistinctValues().forEach((function(n){var r=n,o=a.getCoordinatesForValue(r),i=o.topLeft,l=o.bottomRight;e[r].props.position=Object(c.a)(Object(c.a)({},e[r].props.position),{},Object(m.a)({},t,{column:i.x,columnSpan:l.x-i.x+1,row:i.y,rowSpan:l.y-i.y+1}))}))})))}},{key:"setVertical",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.setGrid(e,k()(Object.keys(this.fields),t))}},{key:"setHorizontal",value:function(e){return this.setGrid(e,[Object.keys(this.fields)])}}]),e}(),P=function(e){return new A(B(e))},C=function(e,t,n){var a;return{position:{},name:e+t,hint:n.description,label:null!==(a=n.title)&&void 0!==a?a:g(t)}},M=function(e,t){return(e+""+t).replace(/\./g,"_")},V=function(e,t){var n=Object(b.a)(Array(e)).map((function(e){return"1fr"}));return t&&n.push("auto"),n.join(" ")},B=function e(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=function(t,n,o,i,u){var s;switch(i.type){case"object":var p=e(i,o+".",u+r);r+=Object.keys(p).length,Object.entries(p).forEach((function(e){var n=Object(l.a)(e,2),a=n[0],r=n[1];t[a]=r}));break;case"string":i.enum?t[n]={type:"SelectField",props:Object(c.a)({options:j(v(i.enum))},C(a,o,i))}:t[n]={type:"TextField",props:Object(c.a)({},C(a,o,i))};break;case"boolean":t[n]={type:"Boolean",props:Object(c.a)({},C(a,o,i))};break;case"number":case"integer":t[n]={type:"NumberField",props:Object(c.a)({},C(a,o,i))};break;case"array":var f="object"===(null===(s=null===i||void 0===i?void 0:i.items)||void 0===s?void 0:s.type)?i.items:{properties:{"":i.items}},d=P(f).setHorizontal("mobileS").getFields();t[n]={type:"ArrayField",props:Object(c.a)({scaffoldFields:d,allowAdd:!0,allowRemove:!0,columns:V(Object.keys(d).length,!0)},C(a,o,i))};break;default:console.warn("Unknown type",i.type)}return t},i=null!==(n=null===t||void 0===t?void 0:t.properties)&&void 0!==n?n:{};return Object.entries(i).reduce((function(e,t,n){var r=Object(l.a)(t,2),i=r[0],c=r[1],u=M(a,i);return c.allOf?c.allOf.reduce((function(e,t){return o(e,u,i,t,n)}),e):c.oneOf?(console.warn("property.oneOf detected! We haven't implemented that yet!"),c.oneOf.reduce((function(e,t){return o(e,u,i,t,n)}),e)):o(e,u,i,c,n)}),{})},N=function(e){var t,n,a;return null===(t=null===e||void 0===e?void 0:e.requestBody)||void 0===t||null===(n=t.content)||void 0===n||null===(a=n["application/json"])||void 0===a?void 0:a.schema},D=n(22),T=n.n(D),U=n(267),I=n(268),J=n.n(I),L=n(269),R=n.n(L),z=function(){var e=Object(U.a)(T.a.mark((function e(t){var n,a,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Headers).set("accept","application/json"),e.next=4,J()(t,{headers:n});case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,e.next=10,R.a.dereference(r);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function G(){var e=Object(u.a)(["\n  position: absolute;\n  right: 10px;\n  top: 10px;\n"]);return G=function(){return e},e}function H(){var e=Object(u.a)(["  \n  margin: 20px 20px;\n"]);return H=function(){return e},e}var W=d.default.div(H()),q=Object(d.default)(h.Spinner)(G()),$=v(["https://acc.api.top.amsterdam.nl/api/v1/schema/","https://zaken-api.vng.cloud/api/v1/schema/openapi.json","https://documenten-api.vng.cloud/api/v1/schema/openapi.json","https://catalogi-api.vng.cloud/api/v1/schema/openapi.json","https://besluiten-api.vng.cloud/api/v1/schema/openapi.json","https://autorisaties-api.vng.cloud/api/v1/schema/openapi.json"]);var _=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(void 0),u=Object(l.a)(i,2),d=u[0],m=u[1],b=Object(a.useState)(void 0),g=Object(l.a)(b,2),j=g[0],O=g[1],y=Object(a.useState)(void 0),E=Object(l.a)(y,2),w=E[0],k=E[1],S=Object(a.useState)(1),x=Object(l.a)(S,2),F=x[0],A=x[1];Object(a.useEffect)((function(){d?(o(!0),z(d).then((function(e){k(e),o(!1)}))):k(null)}),[d,k]);var C,M=w?(C=w,Object.entries(C.paths).reduce((function(e,t){var n=Object(l.a)(t,2),a=n[0],r=n[1];if(r.patch){var o=N(r.patch);o&&(e["PATCH ".concat(a)]=o)}if(r.put){var i=N(r.put);i&&(e["PUT ".concat(a)]=i)}if(r.post){var c=N(r.post);c&&(e["POST ".concat(a)]=c)}return e}),{})):{},B=v(Object.keys(M)),D=M[j],T=P(D).setVertical("mobileS",F).getFields();return r.a.createElement(h.ThemeProvider,null,n&&r.a.createElement(q,{size:20}),r.a.createElement(W,null,r.a.createElement(f.UnboundSelectField,{label:"API",options:$,withEmptyOption:!0,onChange:function(e){m(e.target.value),O(void 0),k(void 0),A(1)}})),w&&r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null,r.a.createElement(f.UnboundSelectField,{label:"Schema",options:B,withEmptyOption:!0,onChange:function(e){return O(e.target.value)}})),r.a.createElement(W,null,r.a.createElement(f.UnboundSelectField,{label:"Number of columns",hint:"Breakpoint is hardcoded on 'laptop' in this demo. But you can set them as you like.",options:v(["1","2","3","4","5","6","7","8","9","10"]),onChange:function(e){return A(parseInt(e.target.value))}}))),j&&r.a.createElement(s.Form,{mutators:Object(c.a)({},p.a),onSubmit:function(e){return console.log(e)},render:function(e){var t=e.values;return r.a.createElement("form",null,r.a.createElement(W,null,r.a.createElement(h.AccordionWrapper,null,r.a.createElement(h.Accordion,{title:"OpenAPI Schema"},r.a.createElement(h.Paragraph,null,"OpenAPI defines this requestBody."),r.a.createElement("pre",null,JSON.stringify(D,null,2))),r.a.createElement(h.Accordion,{title:"Form Schema"},r.a.createElement(h.Paragraph,null,"This autogenerated form-schema should be imported in your project."),r.a.createElement("pre",null,JSON.stringify(T,null,2))),r.a.createElement(h.Accordion,{title:"Form typescript"},r.a.createElement(h.Paragraph,null,"Make sure your FieldNames are type-safe and matching the api by coding your form like this:"),r.a.createElement("pre",null,"<Scaffold formDefinition={formDefinition} />")),r.a.createElement(h.Accordion,{title:"Scaffolded form"},r.a.createElement(f.Scaffold,{fields:T,columns:{laptop:V(F,!1)}})),r.a.createElement(h.Accordion,{title:"Form values"},r.a.createElement("pre",null,JSON.stringify(t,null,2))))))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[271,1,2]]]);
//# sourceMappingURL=main.1a96b0a4.chunk.js.map